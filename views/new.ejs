<!DOCTYPE html>
<html>
  <head>
    <title>APRON</title>
    <link rel="stylesheet" href="/css/app.css" />
  </head>
  <body>
    <h1>APRON - Add Recipe!</h1>
    <a href="/apron"><button>home</button></a>

    <div class="container">
      <form action="/apron" method="POST">
        <!-- Image -->
        <label for="img">Image: </label>
        <input
          type="text"
          id="img"
          name="img"
          placeholder="url of image here"
          value=""
        /><br />

        <!-- Name of Dish -->
        <label for="name">Name: </label>
        <input
          type="text"
          id="name"
          name="name"
          placeholder="name of dish here"
          value=""
        /><br />

        <!-- Preparation Time -->
        <label for="prep">Prep Time: </label>
        <input
          type="number"
          id="prep"
          name="prep"
          min="0"
          step="1"
          placeholder="prep time in mins"
          value=""
        /><br />

        <!-- Cooking Time -->
        <label for="cook">Cooking Time: </label>
        <input
          type="number"
          id="cook"
          name="cook"
          min="0"
          step="1"
          placeholder="cooking time in mins"
          value=""
        /><br />

        <!-- Serving Size -->
        <label for="serves">Serving Size: </label>
        <input
          type="number"
          id="servers"
          name="serves"
          min="0"
          step="1"
          placeholder="serving size here"
          value=""
        /><br />

        <!-- Ingredients-->
        <label for="ingredient_input">Ingredients: </label><br />
        <input
          type="text"
          id="ingredient_input"
          name="ingredients_input"
          placeholder="ingredient here"
          value=""
        /><br />

        <input
          type="button"
          class="myButton"
          id="addIngredient"
          value="add next ingredient"
        />
        <br />
        <br />

        <!-- Steps -->
        <label for="instructions_input">Instructions: </label><br />
        <input
          type="text"
          id="instructions_input"
          name="instructions_input"
          placeholder="step here"
          value=""
        /><br />

        <input
          type="button"
          class="myButton"
          id="addStep"
          value="add next step"
        />
        <br />
        <br />

        <input type="submit" />

        <ul>
          <input id="hidden_ul" type="hidden" />
        </ul>
        <ul>
          <input id="hidden_ul_step" type="hidden" />
        </ul>
      </form>
    </div>

    <div class="container">
      <!-- display data already entered here -->
      <!-- ingredients here-->
      <ul id="ingredients_list"></ul>

      <!-- steps here -->
      <ul id="instructions_list"></ul>
    </div>

    <script>
      // ======= Button Events =======
      //get a reference to the element
      var myBtn = document.getElementsByClassName("myButton");

      //add event listener
      for (let i = 0; i < myBtn.length; i++) {
        myBtn[i].addEventListener("click", function(err) {
          err.preventDefault();
        });
      }

      // ======= Adding ingredients =======
      var btnAddIngredient = document.getElementById("addIngredient");
      var ulIngredientHidden = document.getElementById("hidden_ul");

      btnAddIngredient.addEventListener("click", function() {
        // create li
        var newLi = document.createElement("li");

        // create input tag for li
        var tagInput = document.createElement("input");

        // get value of user input
        var newText = document.getElementById("ingredient_input").value;

        // set attributes to input tag
        tagInput.setAttribute("name", "ingredients");
        tagInput.setAttribute("type", "hidden");
        tagInput.setAttribute("value", newText);

        // assign value of user input to li
        newLi.appendChild(document.createTextNode(newText));

        // append input tag to li
        newLi.appendChild(tagInput);

        // append li to ul
        ulIngredientHidden.appendChild(newLi);

        // clear field for new input
        document.getElementById("ingredient_input").value = "";
      });

      // ======= Adding instructions =======
      var btnAddSteps = document.getElementById("addStep");
      var ulStepsHidden = document.getElementById("hidden_ul_step");

      btnAddSteps.addEventListener("click", function() {
        // create li
        var newLi = document.createElement("li");

        // create input tag for li
        var tagInput = document.createElement("input");

        // get value of user input
        var newText = document.getElementById("instructions_input").value;

        // set attributes to input tag
        tagInput.setAttribute("name", "instructions");
        tagInput.setAttribute("type", "hidden");
        tagInput.setAttribute("value", newText);

        // assign value of user input to li
        newLi.appendChild(document.createTextNode(newText));

        // append input tag to li
        newLi.appendChild(tagInput);

        // append li to ul
        ulStepsHidden.appendChild(newLi);

        // clear field for new input
        document.getElementById("instructions_input").value = "";
      });
    </script>
  </body>
</html>
